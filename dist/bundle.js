(()=>{"use strict";const e=e=>{const t=document.querySelector(".project-list"),o=e.getAllProjects();document.querySelectorAll(".project-name").forEach((e=>{e.remove()})),o.forEach((e=>{const o=document.createElement("button");o.classList.add("project-name"),o.textContent=e,t.insertBefore(o,document.querySelector(".add-project"))}))},t=e=>{document.querySelector(".main h3").textContent=e.name,document.querySelectorAll(".task").forEach((e=>{e.remove()})),e.getAllTodos().forEach(((e,t)=>{console.log(1);const o=document.querySelector(".main"),n=document.createElement("div");n.classList.add("task"),n.id=t;const r=document.createElement("h4");r.textContent=e.title,r.classList.add("title");const c=document.createElement("p");c.textContent=e.description;const d=document.createElement("p");d.textContent=e.dueDate;const i=document.createElement("h4");i.textContent=e.priority;const s=document.createElement("button");s.textContent="edit",s.classList.add("edit");const l=document.createElement("button");l.textContent="X",l.classList.add("remove"),n.append(r,c,d,i,s,l),o.insertBefore(n,document.querySelector("form"))})),document.querySelector("form").classList.add("hidden"),document.querySelector(".table").classList.remove("hidden")};class o{constructor(e){this.name=e,this.list=[]}addTodo(e){this.list.push(e)}getAllTodos(){return this.list}getIndexByTitle(e){let t=-1;return this.list.every(((o,n)=>e!==o.title||(t=n,!1))),t}getTodoByTitle(e){let t=-1;return this.list.every(((o,n)=>e!==o.title||(t=n,!1))),this.list[t]}removeTodoByName(e){let t=-1;this.list.every(((o,n)=>e!==o.title||(t=n,!1))),this.list.splice(t,1)}getTodoByIndex(e){return this.list[e]}}class n{constructor(e,t,o,n,r=!1){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.isFinished=r}}let r=new class{constructor(){this.object={}}addProject(e){this.object[e.name]=e}getProjectByName(e){return this.object[e]}getAllProjects(){return Object.keys(this.object)}},c=new n("Homework","Math, English, Physics","2022-05-12","High"),d=new n("Laundry","","2022-05-12","Low"),i=new o("Daily");i.addTodo(c),i.addTodo(d),r.addProject(i);const s=document.querySelector(".add-project"),l=()=>{document.querySelectorAll(".edit").forEach((e=>{e.addEventListener("click",(e=>{const o=document.querySelector(".form-add").cloneNode(!0),n=document.querySelector(".main");o.classList.remove("hidden"),o.classList.remove("form-add"),o.classList.add("form-edit");const c=e.target.parentNode;o.id=c.id;const d=o.childNodes,i=document.querySelector(".main h3"),s=e.target.parentNode.querySelector(".title").textContent,m=r.getProjectByName(i.textContent).getTodoByTitle(s);d.item(1).value=m.title,d.item(3).value=m.description,d.item(5).setAttribute("value",m.dueDate);for(let e=0;e<d.item(7).childNodes.length;e++)d.item(7).childNodes.item(e).value===m.priority&&d.item(7).childNodes.item(e).setAttribute("selected","");o.lastChild.remove(),o.addEventListener("submit",(e=>{e.preventDefault();const o=e.target.querySelectorAll("input, select");let n=[];o.forEach((e=>{n.push(e.value)}));const c=e.target.id;let d=r.getProjectByName(i.textContent).getTodoByIndex(c);d.title=n[0],d.description=n[1],d.dueDate=n[2],d.priority=n[3],console.log(n),e.target.remove(),t(r.getProjectByName(i.textContent)),l(),a()}));const u=document.createElement("button");u.textContent="Submit",o.appendChild(u),n.replaceChild(o,c)}))}))},a=()=>{document.querySelectorAll(".remove").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const o=e.target.parentNode.querySelector(".title").textContent,n=document.querySelector(".main h3").textContent;console.log(o),r.getProjectByName(n).removeTodoByName(o),t(r.getProjectByName(n)),a(),l()}))}))};(e=>{const t=document.querySelector(".main");t.innerHTML="";const o=document.createElement("h3"),n=document.createElement("div");n.classList.add("table"),o.textContent=e.name;const r=document.createElement("button");r.textContent="+ Add a task",r.addEventListener("click",(()=>{document.querySelector("form").classList.remove("hidden"),n.classList.add("hidden")})),t.appendChild(o);const c=document.createElement("form");c.classList.add("hidden"),c.classList.add("form-add");const d=document.createElement("label");d.textContent="Title",d.setAttribute("for","title");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("id","title"),i.setAttribute("name","title"),i.required=!0;const s=document.createElement("label");s.textContent="Description",s.setAttribute("for","description");const l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","description"),l.setAttribute("name","description");const a=document.createElement("label");a.textContent="Due Date",a.setAttribute("for","date");const m=document.createElement("input");m.setAttribute("type","date"),m.setAttribute("id","date"),m.setAttribute("name","date"),m.required=!0;const u=document.createElement("label");u.textContent="Priority",u.setAttribute("for","priority");const p=document.createElement("select");p.setAttribute("name","priority"),p.setAttribute("id","priority"),p.required=!0;const h=document.createElement("option");h.value="";const y=document.createElement("option");y.value="High",y.textContent="High";const E=document.createElement("option");E.value="Medium",E.textContent="Medium";const b=document.createElement("option");b.value="Low",b.textContent="Low";const v=document.createElement("hr"),C=document.createElement("button");C.classList.add("form-submit"),C.textContent="Submit",p.append(h,y,E,b),c.append(d,i,s,l,a,m,u,p,v,C),t.appendChild(c),n.appendChild(r),t.appendChild(n)})(i),t(i),e(r),a(),l();const m=document.querySelector("form");s.addEventListener("click",(n=>{n.preventDefault();const c=prompt("Name?","");r.addProject(new o(c)),e(r),document.querySelectorAll(".project-name").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const o=e.target.textContent;t(r.getProjectByName(o)),a(),l()}))}))})),m.addEventListener("submit",(e=>{e.preventDefault();const o=document.querySelectorAll("form input, select"),c=document.querySelector(".main h3");let d=[];o.forEach((e=>{d.push(e.value)})),r.getProjectByName(c.textContent).addTodo(new n(d[0],d[1],d[2],d[3])),console.log(r.getProjectByName(c.textContent).list),t(r.getProjectByName(c.textContent)),m.reset(),a(),l()}))})();